/**
 * vivus - JavaScript library to make drawing animation on SVG
 * @version v0.1.2
 * @link https://github.com/maxwellito/vivus
 * @license MIT
 */
"use strict";!function(){for(var t,e=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],a=n.length,i=window.console=window.console||{};a--;)t=n[a],i[t]||(i[t]=e)}(),!function(){function t(t){if("undefined"==typeof t)throw new Error('Pathformer [constructor]: "element" parameter is required');if(t.constructor===String&&(t=document.getElementById(t),!t))throw new Error('Pathformer [constructor]: "element" parameter is not related to an existing ID');if(t.constructor!==SVGSVGElement)throw new Error('Pathformer [constructor]: "element" parameter must be a string or a SVGelement');this.el=t,this.scan(t)}function e(e,n,a){this.setElement(e),this.setOptions(n),this.setCallback(a),this.frameLength=0,this.currentFrame=0,this.map=[],new t(e),this.mapping(),this.starter()}t.prototype.TYPES=["line","elipse","circle","polygon","polyline","rect"],t.prototype.ATTR_WATCH=["cx","cy","points","r","rx","ry","x","x1","x2","y","y1","y2"],t.prototype.scan=function(t){for(var e,n,a,i,r=t.querySelectorAll(this.TYPES.join(",")),o=0;o<r.length;o++)n=r[o],e=this[n.tagName.toLowerCase()+"ToPath"],a=e(this.parseAttr(n.attributes)),i=this.pathMaker(n,a),n.parentNode.replaceChild(i,n)},t.prototype.lineToPath=function(t){var e={};return e.d="M"+t.x1+","+t.y1+"L"+t.x2+","+t.y2,e},t.prototype.rectToPath=function(t){var e={},n=parseFloat(t.x)||0,a=parseFloat(t.y)||0,i=parseFloat(t.width)||0,r=parseFloat(t.height)||0;return e.d="M"+n+" "+a+" ",e.d+="L"+(n+i)+" "+a+" ",e.d+="L"+(n+i)+" "+(a+r)+" ",e.d+="L"+n+" "+(a+r)+" Z",e},t.prototype.polylineToPath=function(t){for(var e={},n=t.points.split(" "),a="M"+n[0],i=1;i<n.length;i++)-1!==n[i].indexOf(",")&&(a+="L"+n[i]);return e.d=a,e},t.prototype.polygonToPath=function(e){var n=t.prototype.polylineToPath(e);return n.d+="Z",n},t.prototype.elipseToPath=function(t){var e=t.cx-t.rx,n=t.cy,a=parseFloat(t.cx)+parseFloat(t.rx),i=t.cy,r={};return r.d="M"+e+","+n+"A"+t.rx+","+t.ry+" 0,1,1 "+a+","+i+"A"+t.rx+","+t.ry+" 0,1,1 "+e+","+i,r},t.prototype.circleToPath=function(t){var e={},n=t.cx-t.r,a=t.cy,i=parseFloat(t.cx)+parseFloat(t.r),r=t.cy;return e.d="M"+n+","+a+"A"+t.r+","+t.r+" 0,1,1 "+i+","+r+"A"+t.r+","+t.r+" 0,1,1 "+n+","+r,e},t.prototype.pathMaker=function(t,e){var n,a,i=document.createElementNS("http://www.w3.org/2000/svg","path");for(n=0;n<t.attributes.length;n++)a=t.attributes[n],-1===this.ATTR_WATCH.indexOf(a.name)&&i.setAttribute(a.name,a.value);for(n in e)i.setAttribute(n,e[n]);return i},t.prototype.parseAttr=function(t){for(var e,n={},a=0;a<t.length;a++){if(e=t[a],-1!==this.ATTR_WATCH.indexOf(e.name)&&-1!==e.value.indexOf("%"))throw new Error("Pathformer [parseAttr]: a SVG shape got values in percentage. This cannot be transformed into 'path' tags. Please use 'viewBox'.");n[e.name]=e.value}return n};var n,a,i;e.prototype.setElement=function(t){if("undefined"==typeof t)throw new Error('Vivus [constructor]: "element" parameter is required');if(t.constructor===String&&(t=document.getElementById(t),!t))throw new Error('Vivus [constructor]: "element" parameter is not related to an existing ID');if(t.constructor!==SVGSVGElement)throw new Error('Vivus [constructor]: "element" parameter must be a string or a SVGelement');this.el=t},e.prototype.setOptions=function(t){var e=["delayed","async","oneByOne","scenario","scenario-sync"],n=["inViewport","manual","autostart"];if(void 0!==t&&t.constructor!==Object)throw new Error('Vivus [constructor]: "options" parameter must be an object');if(t=t||{},t.type&&-1===e.indexOf(t.type))throw new Error("Vivus [constructor]: "+t.type+" is not an existing animation `type`");if(this.type=t.type||e[0],t.start&&-1===n.indexOf(t.start))throw new Error("Vivus [constructor]: "+t.start+" is not an existing `start` option");if(this.start=t.start||n[0],this.isIE=-1!==navigator.userAgent.indexOf("MSIE"),this.duration=i(t.duration,120),this.delay=i(t.delay,null),this.dashGap=i(t.dashGap,2),this.forceRender=t.hasOwnProperty("forceRender")?!!t.forceRender:this.isIE,this.selfDestroy=!!t.selfDestroy,this.delay>=this.duration)throw new Error("Vivus [constructor]: delay must be shorter than duration")},e.prototype.setCallback=function(t){if(t&&t.constructor!==Function)throw new Error('Vivus [constructor]: "callback" parameter must be a function');this.callback=t||function(){}},e.prototype.mapping=function(){var t,e,n,a,r,o,s,l;for(l=o=s=0,e=this.el.querySelectorAll("path"),t=0;t<e.length;t++)n=e[t],r={el:n,length:Math.ceil(n.getTotalLength())},isNaN(r.length)?window.console&&console.warn&&console.warn("Vivus [mapping]: cannot retrieve a path element length",n):(o+=r.length,this.map.push(r),n.style.strokeDasharray=r.length+" "+(r.length+this.dashGap),n.style.strokeDashoffset=r.length,this.isIE&&(r.length+=this.dashGap),this.renderPath(t));for(o=0===o?1:o,this.delay=null===this.delay?this.duration/3:this.delay,this.delayUnit=this.delay/(e.length>1?e.length-1:1),t=0;t<this.map.length;t++){switch(r=this.map[t],this.type){case"delayed":r.startAt=this.delayUnit*t,r.duration=this.duration-this.delay;break;case"oneByOne":r.startAt=s/o*this.duration,r.duration=r.length/o*this.duration;break;case"async":r.startAt=0,r.duration=this.duration;break;case"scenario-sync":n=e[t],a=this.parseAttr(n),r.startAt=l+(i(a["data-delay"],this.delayUnit)||0),r.duration=i(a["data-duration"],this.duration),l=void 0!==a["data-async"]?r.startAt:r.startAt+r.duration,this.frameLength=Math.max(this.frameLength,r.startAt+r.duration);break;case"scenario":n=e[t],a=this.parseAttr(n),r.startAt=i(a["data-start"],this.delayUnit)||0,r.duration=i(a["data-duration"],this.duration),this.frameLength=Math.max(this.frameLength,r.startAt+r.duration)}s+=r.length,this.frameLength=this.frameLength||this.duration}},e.prototype.drawer=function(){var t=this;this.currentFrame+=this.speed,this.currentFrame<=0?(this.stop(),this.reset()):this.currentFrame>=this.frameLength?(this.stop(),this.currentFrame=this.frameLength,this.trace(),this.selfDestroy&&this.destroy(),this.callback(this)):(this.trace(),this.handle=n(function(){t.drawer()}))},e.prototype.trace=function(){var t,e,n;for(t=0;t<this.map.length;t++)n=this.map[t],e=(this.currentFrame-n.startAt)/n.duration,e=Math.max(0,Math.min(1,e)),n.progress!==e&&(n.progress=e,n.el.style.strokeDashoffset=Math.floor(n.length*(1-e)),this.renderPath(t))},e.prototype.renderPath=function(t){if(this.forceRender&&this.map&&this.map[t]){var e=this.map[t],n=e.el.cloneNode(!0);e.el.parentNode.replaceChild(n,e.el),e.el=n}},e.prototype.starter=function(){switch(this.start){case"manual":return;case"autostart":this.play();break;case"inViewport":var t=this,e=function(){t.isInViewport(t.el,1)&&(t.play(),window.removeEventListener("scroll",e))};window.addEventListener("scroll",e),e()}},e.prototype.reset=function(){return this.currentFrame=0,this.trace(),this},e.prototype.play=function(t){if(t&&"number"!=typeof t)throw new Error("Vivus [play]: invalid speed");return this.speed=t||1,this.handle||this.drawer(),this},e.prototype.stop=function(){return this.handle&&(a(this.handle),delete this.handle),this},e.prototype.destroy=function(){var t,e;for(t=0;t<this.map.length;t++)e=this.map[t],e.el.style.strokeDashoffset=null,e.el.style.strokeDasharray=null,this.renderPath(t)},e.prototype.parseAttr=function(t){var e,n={};if(t&&t.attributes)for(var a=0;a<t.attributes.length;a++)e=t.attributes[a],n[e.name]=e.value;return n},e.prototype.isInViewport=function(t,e){var n=this.scrollY(),a=n+this.getViewportH(),i=t.getBoundingClientRect(),r=i.height,o=n+i.top,s=o+r;return e=e||0,a>=o+r*e&&s>=n},e.prototype.docElem=window.document.documentElement,e.prototype.getViewportH=function(){var t=this.docElem.clientHeight,e=window.innerHeight;return e>t?e:t},e.prototype.scrollY=function(){return window.pageYOffset||this.docElem.scrollTop},n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),a=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t)}}(),i=function(t,e){var n=parseInt(t,10);return n>=0?n:e},window.Vivus=e}(),!function(t){var e="animsition",n={init:function(a){a=t.extend({inClass:"fade-in",outClass:"fade-out",inDuration:1500,outDuration:800,linkElement:".animsition-link",loading:!0,loadingParentElement:"body",loadingClass:"animsition-loading",unSupportCss:["animation-duration","-webkit-animation-duration","-o-animation-duration"],overlay:!1,overlayClass:"animsition-overlay-slide",overlayParentElement:"body"},a);var i=n.supportCheck.call(this,a);if(!i)return"console"in window||(window.console={},window.console.log=function(t){return t}),console.log("Animsition does not support this browser."),n.destroy.call(this);var r=n.optionCheck.call(this,a);return r&&n.addOverlay.call(this,a),a.loading&&n.addLoading.call(this,a),this.each(function(){var i=this,r=t(this),o=t(window),s=r.data(e);s||(a=t.extend({},a),r.data(e,{options:a}),o.on("load."+e+" pageshow."+e,function(){n.pageIn.call(i)}),o.on("unload."+e,function(){}),t(a.linkElement).on("click."+e,function(e){e.preventDefault();var a=t(this);n.pageOut.call(i,a)}))})},addOverlay:function(e){t(e.overlayParentElement).prepend('<div class="'+e.overlayClass+'"></div>')},addLoading:function(e){t(e.loadingParentElement).append('<div class="'+e.loadingClass+'"></div>')},removeLoading:function(){var n=t(this),a=n.data(e).options,i=t(a.loadingParentElement).children("."+a.loadingClass);i.fadeOut().remove()},supportCheck:function(e){var n=t(this),a=e.unSupportCss,i=a.length,r=!1;0===i&&(r=!0);for(var o=0;i>o;o++)if("string"==typeof n.css(a[o])){r=!0;break}return r},optionCheck:function(e){var n,a=t(this);return n=e.overlay||a.data("animsition-overlay")?!0:!1},animationCheck:function(n,a,i){var r=t(this),o=r.data(e).options,s=typeof n,l=!a&&"number"===s,c=a&&"string"===s&&n.length>0;return l||c?n=n:a&&i?n=o.inClass:!a&&i?n=o.inDuration:a&&!i?n=o.outClass:a||i||(n=o.outDuration),n},pageIn:function(){var a=this,i=t(this),r=i.data(e).options,o=i.data("animsition-in-duration"),s=i.data("animsition-in"),l=n.animationCheck.call(a,o,!1,!0),c=n.animationCheck.call(a,s,!0,!0),h=n.optionCheck.call(a,r);r.loading&&n.removeLoading.call(a),h?n.pageInOverlay.call(a,c,l):n.pageInBasic.call(a,c,l)},pageInBasic:function(e,n){var a=t(this);a.css({"animation-duration":n/1e3+"s"}).addClass(e).animateCallback(function(){a.removeClass(e).css({opacity:1})})},pageInOverlay:function(n,a){var i=t(this),r=i.data(e).options;i.css({opacity:1}),t(r.overlayParentElement).children("."+r.overlayClass).css({"animation-duration":a/1e3+"s"}).addClass(n)},pageOut:function(a){var i=this,r=t(this),o=r.data(e).options,s=a.data("animsition-out"),l=r.data("animsition-out"),c=a.data("animsition-out-duration"),h=r.data("animsition-out-duration"),u=s?s:l,d=c?c:h,p=n.animationCheck.call(i,u,!0,!1),m=n.animationCheck.call(i,d,!1,!1),f=n.optionCheck.call(i,o),y=a.attr("href");f?n.pageOutOverlay.call(i,p,m,y):n.pageOutBasic.call(i,p,m,y)},pageOutBasic:function(e,n,a){var i=t(this);i.css({"animation-duration":n/1e3+"s"}).addClass(e).animateCallback(function(){location.href=a})},pageOutOverlay:function(a,i,r){var o=this,s=t(this),l=s.data(e).options,c=s.data("animsition-in"),h=n.animationCheck.call(o,c,!0,!0);t(l.overlayParentElement).children("."+l.overlayClass).css({"animation-duration":i/1e3+"s"}).removeClass(h).addClass(a).animateCallback(function(){s.css({opacity:0}),location.href=r})},destroy:function(){return this.each(function(){var n=t(this);t(window).unbind("."+e),n.css({opacity:1}).removeData(e)})}};t.fn.animateCallback=function(e){var n="animationend webkitAnimationEnd mozAnimationEnd oAnimationEnd MSAnimationEnd";return this.each(function(){t(this).bind(n,function(){return t(this).unbind(n),e.call(this)})})},t.fn.animsition=function(a){return n[a]?n[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on jQuery."+e):n.init.apply(this,arguments)}}(jQuery);